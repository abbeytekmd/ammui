<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>AMCUI | OpenHome Explorer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="top-bar">
            <header>
                <div class="header-main">
                    <h1>AMCUI</h1>
                    <button id="btn-manage-devices" onclick="openManageModal()" class="btn-control ghost"
                        title="Manage saved devices">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                        </svg>
                        Manage
                    </button>
                </div>
            </header>

            <nav class="mobile-tabs">
                <button onclick="switchView('browser')" id="tab-browser" class="tab-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    Sources
                    <span id="tab-server-count" class="tab-badge">0</span>
                </button>
                <button onclick="switchView('playlist')" id="tab-playlist" class="tab-item active">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linejoin="round">
                        <path d="M6 9h5l7-7v20l-7-7H6V9z" fill="currentColor"></path>
                    </svg>
                    Players
                    <span id="tab-renderer-count" class="tab-badge">0</span>
                </button>
            </nav>
        </div>

        <main class="main-layout">
            <!-- Left Column: Media Sources & Folders -->
            <div class="column browser-column">
                <section class="device-section">
                    <div class="section-header">
                        <h2>Media Sources</h2>
                        <span id="server-count" class="badge">0 found</span>
                    </div>
                    <div id="server-list" class="device-list">
                        <div class="empty-state">Searching for Media Sources...</div>
                    </div>
                </section>

                <div id="browser-container" class="playlist-container">
                    <div class="section-header">
                        <div class="header-group">
                            <div class="header-controls">
                                <div class="browser-control-group">
                                    <button id="btn-play-all" onclick="playAll()" class="btn-control disabled primary"
                                        title="Clear and play all tracks">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M5 3l14 9-14 9V3z"></path>
                                        </svg>
                                        Play All
                                    </button>
                                    <span class="divider"></span>
                                    <button id="btn-add-all" onclick="addAllToPlaylist()" class="btn-control disabled"
                                        title="Add all tracks on view">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M12 5v14M5 12h14"></path>
                                        </svg>
                                        Add All
                                    </button>
                                    <span class="divider"></span>
                                    <button id="btn-set-home" onclick="setHome()" class="btn-control"
                                        title="Set current folder as home">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                        </svg>
                                        Set Home
                                    </button>
                                </div>
                            </div>
                            <div id="browser-breadcrumbs" class="breadcrumbs">
                                <!-- Breadcrumbs will go here -->
                            </div>
                        </div>
                    </div>
                    <div id="browser-items" class="playlist-items">
                        <div class="empty-state">Select a server to browse folders</div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Players & Playlist -->
            <div class="column player-column active">
                <section class="device-section">
                    <div class="section-header">
                        <h2>Players</h2>
                        <span id="renderer-count" class="badge">0 found</span>
                    </div>
                    <div id="device-list" class="device-list">
                        <div class="empty-state">Searching for Players...</div>
                    </div>
                </section>

                <div id="playlist-container" class="playlist-container">
                    <div class="section-header">
                        <div class="header-group">
                            <div class="playlist-controls">
                                <div class="transport-group">
                                    <button id="btn-play" onclick="transportAction('play')"
                                        class="btn-control primary btn-transport-play" title="Play">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M8 5v14l11-7z"></path>
                                        </svg>
                                    </button>
                                    <button id="btn-pause" onclick="transportAction('pause')"
                                        class="btn-control btn-transport-pause" title="Pause">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
                                        </svg>
                                    </button>
                                    <button id="btn-stop" onclick="transportAction('stop')"
                                        class="btn-control btn-transport-stop" title="Stop">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M6 6h12v12H6z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <span class="divider"></span>
                                <div class="volume-control-wrapper">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                    </svg>
                                    <div class="volume-slider-container">
                                        <button class="btn-volume-step" onclick="adjustVolume(-5)"
                                            title="Decrease volume">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2.5">
                                                <path d="M5 12h14"></path>
                                            </svg>
                                        </button>
                                        <input type="range" id="volume-slider" min="0" max="100" step="1"
                                            oninput="updateVolume(this.value)" class="volume-slider">
                                        <button class="btn-volume-step" onclick="adjustVolume(5)"
                                            title="Increase volume">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2.5">
                                                <path d="M12 5v14M5 12h14"></path>
                                            </svg>
                                        </button>
                                        <div id="volume-value">0%</div>
                                    </div>
                                </div>
                                <span class="divider"></span>
                                <div class="header-status-group">
                                    <span id="playlist-count" class="badge">0</span>
                                    <button id="btn-clear" onclick="clearPlaylist()" class="btn-control"
                                        title="Clear Playlist">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path
                                                d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6">
                                            </path>
                                        </svg>
                                        Clear
                                    </button>
                                </div>
                            </div>
                            <div class="position-control-wrapper">
                                <div id="now-playing-label" class="now-playing-label">Not Playing</div>
                                <span id="pos-current" class="time-label">0:00</span>
                                <div class="position-slider-container">
                                    <input type="range" id="position-slider" min="0" max="100" value="0" step="1"
                                        oninput="updatePositionDisplay(this.value)" onchange="seekTo(this.value)"
                                        class="position-slider">
                                </div>
                                <span id="pos-duration" class="time-label">0:00</span>
                            </div>
                        </div>
                    </div>
                    <div id="playlist-items" class="playlist-items">
                        <div class="empty-state">Select a renderer to view playlist</div>
                    </div>
                </div>
            </div>
        </main>


    </div>

    <div id="server-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-group">
                    <h2>Select Media Server</h2>
                    <button class="btn-control btn-seek" onclick="triggerDiscovery(this)"
                        title="Search for more servers">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        Seek
                    </button>
                </div>
                <button class="btn-close" onclick="closeServerModal()">✕</button>
            </div>
            <div id="modal-server-list" class="device-list">
                <!-- Servers will be listed here -->
            </div>
        </div>
    </div>

    <div id="renderer-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-group">
                    <h2>Select Player</h2>
                    <button class="btn-control btn-seek" onclick="triggerDiscovery(this)"
                        title="Search for more players">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        Seek
                    </button>
                </div>
                <button class="btn-close" onclick="closeRendererModal()">✕</button>
            </div>
            <div id="modal-renderer-list" class="device-list">
                <!-- Renderers will be listed here -->
            </div>
        </div>
    </div>

    <div id="manage-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content manage-modal-content">
            <div class="modal-header">
                <div class="modal-title-group">
                    <h2>Manage Devices</h2>
                </div>
                <button class="btn-close" onclick="closeManageModal()">✕</button>
            </div>
            <div class="manage-list-container">
                <div class="manage-section">
                    <h3>Players</h3>
                    <div id="manage-renderer-list" class="manage-device-list"></div>
                </div>
                <div class="manage-section">
                    <h3>Media Servers</h3>
                    <div id="manage-server-list" class="manage-device-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>